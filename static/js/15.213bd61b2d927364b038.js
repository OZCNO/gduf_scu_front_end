webpackJsonp([15],{dIqY:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("n5Qe"),s={name:"Reg",data:function(){var e=this;return{reging:!1,institute:[],regForm:{username:"",password:"",repassword:"",name:""},regRules:{username:[{required:!0,message:"请输入学号",trigger:"blur"},{min:9,max:10,message:"学号输入不正确",trigger:"blur"},{validator:function(e,r,t){/^[1-9][0-9]+[A-Z]?[0-9]+$/.test(r)?t():t(new Error("学号输入不正确"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度为8~16",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(r,t,a){t!==e.regForm.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{validator:function(e,r,t){/([\u4e00-\u9fa5]{2,5})/.test(r)?t():t(new Error("请输入你的中文姓名"))},trigger:"blur"}]}}},methods:{regSubmit:function(e){var r=this;this.$refs[e].validate(function(e){if(e){r.reging=!0;var t={username:r.regForm.username,password:r.regForm.password,name:r.regForm.name};Object(a.o)(t).then(function(e){r.reging=!1;var t=e.data,a=t.code,s=t.msg,o=t.data;console.log(e),200==a?(localStorage.setItem("role",1),localStorage.setItem("name",o.user.name),localStorage.setItem("avatar",o.user.avatar||"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3502149281,2119482052&fm=27&gp=0.jpg"),r.$router.push({path:"personCenter"})):r.$message.error(s)}).catch(function(e){console.log(e),r.$message.error("注册失败，再试一次")})}else r.$message.error("输入有误")})}}},o={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"regContainer"},[t("el-form",{ref:"regForm",staticClass:"regForm",attrs:{model:e.regForm,rules:e.regRules,size:"medium"}},[t("h3",{staticClass:"title"},[e._v("学生注册")]),e._v(" "),t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.regForm.name,callback:function(r){e.$set(e.regForm,"name",r)},expression:"regForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入账号，即学号"},model:{value:e.regForm.username,callback:function(r){e.$set(e.regForm,"username",r)},expression:"regForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.regForm.password,callback:function(r){e.$set(e.regForm,"password",r)},expression:"regForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"repassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.regForm.repassword,callback:function(r){e.$set(e.regForm,"repassword",r)},expression:"regForm.repassword"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",id:"regSubmit",loading:e.reging},on:{click:function(r){e.regSubmit("regForm")}}},[e._v("注册")])],1),e._v(" "),t("el-form-item",[t("router-link",{staticClass:"logLink",attrs:{to:{name:"Login"}}},[t("i",{staticClass:"el-icon-d-arrow-right"}),t("i",{staticClass:"el-icon-d-arrow-right"}),t("i",{staticClass:"el-icon-d-arrow-right"}),e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var n=t("VU/8")(s,o,!1,function(e){t("yeGL")},"data-v-40a916b4",null);r.default=n.exports},yeGL:function(e,r){}});
//# sourceMappingURL=15.213bd61b2d927364b038.js.map