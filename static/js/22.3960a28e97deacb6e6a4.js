webpackJsonp([22],{YEr5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("n5Qe"),i={name:"clubActivityApplyPush",data:function(){return{list:[],listLoading:!1,page:1,total:10,dialogFormVisible:!1,dialogDetailFormVisible:!1,form:{clubUnionId:"",theme:"",content:"",memberActivity:0,timeBegin:"",timeEnd:"",enrollDeadline:"",introduction:"",isMoney:0,isGoods:0,address:"",money:"",goods:[]},formRules:{theme:[{required:!0,message:"不能为空",trigger:"blur"}],content:[{required:!0,message:"不能为空",trigger:"blur"}],address:[{required:!0,message:"不能为空",trigger:"blur"}],money:[{required:!0,message:"不能为空",trigger:"blur"}],timeBegin:[{type:"date",required:!0,message:"不能为空",trigger:"change"}],timeEnd:[{type:"date",required:!0,message:"不能为空",trigger:"change"}],enrollDeadline:[{type:"date",required:!0,message:"不能为空",trigger:"change"}],introduction:[{required:!0,message:"不能为空",trigger:"blur"}]},detailForm:{clubUnionId:"",activityId:"",theme:"",content:"",memberActivity:"",timeBegin:"",timeEnd:"",enrollDeadline:"",introduction:"",address:"",money:"",goods:[{sum:"",name:""}],status:0},bool:!0,submitting:!1}},created:function(){var e=this;Object(l.c)(1).then(function(t){e.list=t.data})},methods:{openForm:function(e,t){this.detailForm=t,this.dialogDetailFormVisible=!0},publish:function(){this.dialogDetailFormVisible=!1,this.$message.success("发布成功")},formatStatus:function(e,t){return 1==e.status?"待审核":2==e.status?"待发布":3==e.status?"未通过审核":"已发布"},handleCurrentChange:function(e){this.page=e},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(o){o&&t.$confirm("确定提交吗？","提示").then(function(){t.form.clubUnionId=1,console.log(t.form),Object(l.k)("club",t.form).then(function(o){t.submitting=!0;var l=o.data,i=l.msg,a=l.code;l.data;200==a?(t.submitting=!1,console.log(o),t.$message.success("提交成功"),t.resetForm(e),t.dialogFormVisible=!1):(t.submitting=!1,console.log(o),t.$message.error(i))})})})},removeGoods:function(e){var t=this.form.goods.indexOf(e);-1!==t&&this.form.goods.splice(t,1),0==this.form.goods.length&&(this.form.isGoods=!1)},addGoods:function(){this.form.goods.push({sum:"",name:"",key:Date.now()})},isMoneyChange:function(e){this.form.money=""},isGoodsChange:function(e){0==e?(console.log("[]"),this.form.goods=[]):this.form.goods=[{sum:"",name:""}]}}},a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("活动列表")]),e._v(" "),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("申请活动")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"tableClass",staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":!0,size:"mini"}},[o("el-table-column",{attrs:{type:"index",width:"35"}}),o("el-table-column",{attrs:{prop:"time",label:"申请时间",sortable:"",width:"100","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"timeBegin",label:"举办时间",sortable:"","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"theme",label:"活动主题","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"introduction",label:"活动简介 ","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"",width:"100",formatter:e.formatStatus}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(o){e.openForm(t.$index,t.row)}}},[2==t.row.status?o("span",[e._v("发布活动")]):o("span",[e._v("表单详情")])])]}}])})],1),e._v(" "),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",small:"",layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{attrs:{title:"申请活动",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"110px",size:"mini"}},[o("el-form-item",{attrs:{label:"活动主题",prop:"theme"}},[o("el-input",{attrs:{type:"text",placeholder:"请输入活动主题"},model:{value:e.form.theme,callback:function(t){e.$set(e.form,"theme",t)},expression:"form.theme"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"会员活动",prop:"memberActivity",required:""}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":"0"},model:{value:e.form.memberActivity,callback:function(t){e.$set(e.form,"memberActivity",t)},expression:"form.memberActivity"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"报名截止时间",prop:"enrollDeadline",required:""}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.form.enrollDeadline,callback:function(t){e.$set(e.form,"enrollDeadline",t)},expression:"form.enrollDeadline"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"活动时间",required:""}},[o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{prop:"timeBegin"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始时间","default-time":"12:00:00"},model:{value:e.form.timeBegin,callback:function(t){e.$set(e.form,"timeBegin",t)},expression:"form.timeBegin"}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("—")]),e._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{prop:"timeEnd"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束时间","default-time":"12:00:00"},model:{value:e.form.timeEnd,callback:function(t){e.$set(e.form,"timeEnd",t)},expression:"form.timeEnd"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"申请"}},[o("el-col",{attrs:{span:8}},[o("el-switch",{attrs:{"active-text":"经费","active-value":"1","inactive-value":"0"},on:{change:e.isMoneyChange},model:{value:e.form.isMoney,callback:function(t){e.$set(e.form,"isMoney",t)},expression:"form.isMoney"}})],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-switch",{attrs:{"active-text":"物品","active-value":"1","inactive-value":"0"},on:{change:e.isGoodsChange},model:{value:e.form.isGoods,callback:function(t){e.$set(e.form,"isGoods",t)},expression:"form.isGoods"}})],1),e._v(" "),o("el-col",{attrs:{span:8}},[1==e.form.isGoods?o("el-button",{on:{click:e.addGoods}},[e._v("新增物品")]):e._e()],1)],1),e._v(" "),1==e.form.isMoney?o("el-form-item",{attrs:{label:"经费",prop:"money"}},[o("el-input-number",{attrs:{step:50},model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}}),e._v(" 元")],1):e._e(),e._v(" "),e._l(e.form.goods,function(t,l){return 1==e.form.isGoods?o("el-form-item",{key:t.key,attrs:{label:"物品"+(l+1),prop:"goods."+l+".name",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{placeholder:"请输入物品名称"},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1),e._v(" "),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("：")]),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},model:{value:t.sum,callback:function(o){e.$set(t,"sum",o)},expression:"item.sum"}})],1),e._v(" "),o("el-col",{attrs:{span:6,offset:1}},[o("el-button",{on:{click:function(o){o.preventDefault(),e.removeGoods(t)}}},[e._v("删除")])],1)],1):e._e()}),e._v(" "),o("el-form-item",{attrs:{label:"地点",prop:"address"}},[o("el-input",{attrs:{type:"text",placeholder:"请输入活动地点"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[o("el-input",{attrs:{type:"textarea",placeholder:"活动简介"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"发动小伙伴来参加......"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],2),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:function(t){e.submitForm("form")}}},[e._v("提交")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"活动详情",visible:e.dialogDetailFormVisible},on:{"update:visible":function(t){e.dialogDetailFormVisible=t}}},[3==e.detailForm.status?o("span",{staticStyle:{color:"red"}},[e._v("原因："+e._s(e.detailForm.reason))]):e._e(),e._v(" "),o("el-form",{ref:"detailForm",attrs:{model:e.detailForm,"label-width":"110px",size:"mini",disabled:e.bool}},[o("el-form-item",{attrs:{label:"活动主题"}},[o("el-input",{attrs:{type:"text"},model:{value:e.detailForm.theme,callback:function(t){e.$set(e.detailForm,"theme",t)},expression:"detailForm.theme"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"会员活动"}},[o("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:1==e.detailForm.memberActivity,callback:function(t){e.$set(e.detailForm,"memberActivity==1",t)},expression:"detailForm.memberActivity==1"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"报名截止时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.detailForm.enrollDeadline,callback:function(t){e.$set(e.detailForm,"enrollDeadline",t)},expression:"detailForm.enrollDeadline"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"活动时间"}},[o("el-col",{attrs:{span:11}},[o("el-form-item",[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"12:00:00"},model:{value:e.detailForm.timeBegin,callback:function(t){e.$set(e.detailForm,"timeBegin",t)},expression:"detailForm.timeBegin"}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("—")]),e._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"12:00:00"},model:{value:e.detailForm.timeEnd,callback:function(t){e.$set(e.detailForm,"timeEnd",t)},expression:"detailForm.timeEnd"}})],1)],1)],1),e._v(" "),0!=e.detailForm.money?o("el-form-item",{attrs:{label:"经费"}},[o("el-input-number",{model:{value:e.detailForm.money,callback:function(t){e.$set(e.detailForm,"money",t)},expression:"detailForm.money"}}),e._v(" 元\r\n\t\t\t")],1):e._e(),e._v(" "),e._l(e.detailForm.goods,function(t,l){return o("el-form-item",{key:t.key,attrs:{label:"物品"+(l+1)}},[o("el-col",{attrs:{span:10}},[o("el-input",{model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1),e._v(" "),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("：")]),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-input",{model:{value:t.sum,callback:function(o){e.$set(t,"sum",o)},expression:"item.sum"}})],1)],1)}),e._v(" "),o("el-form-item",{attrs:{label:"地址"}},[o("el-input",{attrs:{type:"text"},model:{value:e.detailForm.address,callback:function(t){e.$set(e.detailForm,"address",t)},expression:"detailForm.address"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"简介"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.detailForm.introduction,callback:function(t){e.$set(e.detailForm,"introduction",t)},expression:"detailForm.introduction"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"内容"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.detailForm.content,callback:function(t){e.$set(e.detailForm,"content",t)},expression:"detailForm.content"}})],1)],2),e._v(" "),2==e.detailForm.status?o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogDetailFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.publish}},[e._v("发布")])],1):e._e()],1)],1)},staticRenderFns:[]};var r=o("VU/8")(i,a,!1,function(e){o("ohJU")},"data-v-1104508a",null);t.default=r.exports},ohJU:function(e,t){}});
//# sourceMappingURL=22.3960a28e97deacb6e6a4.js.map