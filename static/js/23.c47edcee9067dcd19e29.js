webpackJsonp([23],{Dav7:function(t,e){},n0K8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("n5Qe"),l={name:"clubActivityResultPublish",data:function(){return{list:[],listLoading:!1,page:1,total:20,dialogFormVisible:!1,form:{title:"",image:"",content:""},formRules:{title:[{required:!0,message:"不能为空",trigger:"blur"}],content:[{required:!0,message:"不能为空",trigger:"blur"}],image:[{required:!0,message:"不能为空",trigger:"blur"}]},imageUrl:"",submitting:!1}},created:function(){var t=this;Object(i.b)(1).then(function(e){t.list=e.data})},methods:{openForm:function(t,e){this.form=e,this.dialogFormVisible=!0},resetForm:function(t){t.resetFields()},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$confirm("确定提交吗？","提示").then(function(){e.form.acticityId=1,console.log(e.form),Object(i.l)(e.form).then(function(t){e.submitting=!0;var a=t.data,i=a.msg,l=a.code;a.data;200==l?(e.submitting=!1,e.dialogFormVisible=!1,e.$message.success("发布成功")):(e.submitting=!1,e.$message.error(i))})})})},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.form.image=this.imageUrl,console.log(this.imageUrl)},beforeAvatarUpload:function(t){var e=t.size/1024/1024<8;return e||this.$message.error("上传头像图片大小不能超过 8MB!"),e},handleCurrentChange:function(t){this.page=t}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("待发布成果活动列表")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"tableClass",staticStyle:{width:"100%"},attrs:{data:t.list,"highlight-current-row":!0,size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"35"}}),a("el-table-column",{attrs:{prop:"timeBegin",label:"举办时间 ",sortable:""}}),a("el-table-column",{attrs:{prop:"theme",label:"主题"}}),a("el-table-column",{attrs:{prop:"enrolls",label:"报名数",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.openForm(e.$index,e.row)}}},[t._v("发布活动成果")])]}}])})],1),t._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",small:"",layout:"prev, pager, next","page-size":10,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"发布活动成果",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"content",required:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入标题"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://119.29.105.29:8083/postImg","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[this.imageUrl?a("img",{staticClass:"avatar",attrs:{src:this.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.submitting},on:{click:function(e){t.submitForm("form")}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,r,!1,function(t){a("Dav7")},"data-v-0e91ce52",null);e.default=o.exports}});
//# sourceMappingURL=23.c47edcee9067dcd19e29.js.map