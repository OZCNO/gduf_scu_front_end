webpackJsonp([37],{yMXj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("n5Qe"),o={name:"clubMemberAudit",data:function(){return{listLoading:!1,studentList:[],multipleSelection:[],filters:{name:""},page:1,total:0}},created:function(){this.getStudentList()},methods:{formatSex:function(t,e){return 0==t.sex?"男":1==t.sex?"女":"-"},handleCurrentChange:function(t){this.page=t,this.getStudentList()},getStudentList:function(){var t=this,e={page:this.page,name:this.filters.name,role:2};this.listLoading=!0,Object(n.h)(e).then(function(e){200==e.status&&(t.total=e.data.totalCount,t.studentList=e.data.studentList,t.listLoading=!1)}).catch(function(e){t.$message.error("数据获取失败"),t.listLoading=!1})},selectionChange:function(t){this.multipleSelection=t},accept:function(t,e){var i=this;this.$confirm("确定该学生成为干事吗？","提示",{type:"success"}).then(function(){var t={recruit_id:e.recruit_id,student_id:e.student_id,club_union_id:e.club_union_id,type:2};i.listLoading=!0,i.$axios({url:"/acceptThis",type:"post",data:t}).then(function(t){i.listLoading=!1,i.$message({message:"已通过",type:"success"})}).catch(function(t){console.log(t),i.$message({message:"出错啦~",type:"error"})})}).catch(function(t){console.log(t)})},reject:function(t,e){var i=this;this.$confirm("确定拒绝该申请吗？","提示",{type:"warning"}).then(function(){var t={recruit_id:e.recruit_id,student_id:e.student_id,club_union_id:e.club_union_id,type:2};i.listLoading=!0,i.$axios({url:"/rejectThis",type:"post",data:t}).then(function(t){i.listLoading=!1,console.log(t.data),i.$message({message:"已拒绝",type:"success"})}).catch(function(t){console.log(t),i.listLoading=!1,i.$message({message:"出错啦~",type:"error"})})}).catch(function(t){console.log(t)})},acceptSome:function(){var t=this,e=this.multipleSelection.map(function(t){return{recruit_id:t.recruit_id,"student_id:":t.student_id,type:2}});this.$confirm("确定这些同学成为干事吗？","提示",{type:"success"}).then(function(){t.listLoading=!0,t.$axios({url:"/acceptThese",type:"post",data:e}).then(function(e){t.listLoading=!1,t.$message({message:"添加成功",type:"success"})}).catch(function(e){t.listLoading=!1,console.log(e)})}).catch(function(){})},rejectSome:function(){var t=this,e=this.multipleSelection.map(function(t){return{recruit_id:t.recruit_id,"student_id:":t.student_id,club_union_id:t.club_union_id,type:2}});this.$confirm("确定拒绝这些同学吗？","提示",{type:"warning"}).then(function(){t.listLoading=!0,t.$axios({url:"/removeThese",type:"post",data:e}).then(function(e){console.log(e),t.listLoading=!1,t.$message({message:"已拒绝",type:"success"})}).catch(function(e){t.listLoading=!1,console.log(e)})}).catch(function(){})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"clubMemberAuditContainer"},[i("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[i("el-form",{attrs:{inline:!0,size:"mini",model:t.filters}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"姓名"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",click:t.getStudentList}},[t._v("查询")])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"tableClass",staticStyle:{width:"100%"},attrs:{data:t.studentList,"highlight-current-row":!0,size:"mini"},on:{"selection-change":t.selectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),i("el-table-column",{attrs:{type:"expand",width:"15"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-form",{staticClass:"tableExpand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"头像"}},[i("img",{attrs:{src:e.row.avatar}})]),t._v(" "),i("el-form-item",{attrs:{label:"手机号码"}},[i("span",[t._v(t._s(e.row.mobile))])]),t._v(" "),i("el-form-item",{attrs:{label:"邮箱"}},[i("span",[t._v(t._s(e.row.email))])]),t._v(" "),i("el-form-item",{attrs:{label:"自我介绍"}},[i("span",[t._v(t._s(e.row.introduce))])]),t._v(" "),i("el-form-item",{attrs:{label:"参加原因"}},[i("span",[t._v(t._s(e.row.reason))])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{type:"index",width:"35"}}),i("el-table-column",{attrs:{prop:"grade",label:"年级",sortable:"",width:"70"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名",sortable:"",width:"80"}}),i("el-table-column",{attrs:{prop:"sex",label:"性别",sortable:"",width:"70",formatter:t.formatSex}}),i("el-table-column",{attrs:{prop:"institute",label:"学院","show-overflow-tooltip":"",sortable:""}}),i("el-table-column",{attrs:{prop:"major",label:"专业","show-overflow-tooltip":"",sortable:""}}),i("el-table-column",{attrs:{prop:"department",label:"招新部门","show-overflow-tooltip":"",sortable:"","min-width":"90"}}),i("el-table-column",{attrs:{prop:"status",label:"职务","show-overflow-tooltip":"",sortable:"",width:"80"}}),i("el-table-column",{attrs:{prop:"reason",label:"参加原因","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"introduce",label:"自我介绍","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"time",label:"报名时间","show-overflow-tooltip":"",sortable:"",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"142",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.accept(e.$index,e.row)}}},[t._v("通过")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.reject(e.$index,e.row)}}},[t._v("拒绝")])]}}])})],1),t._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.acceptSome}},[t._v("批量通过")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.rejectSome}},[t._v("批量删除")]),t._v(" "),i("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",small:"",layout:"prev, pager, next","page-size":10,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]},l=i("VU/8")(o,a,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=37.e735710393ee7d6ebec0.js.map