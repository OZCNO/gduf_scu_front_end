webpackJsonp([16],{PQlc:function(e,t){},laSO:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("n5Qe"),s={name:"clubActivityMoneyPush",data:function(){return{page:1,total:3,listLoading:!1,list:[],moneyForm:{activityId:"1",clubUnionId:"",moneyUse:[{use:"",sum:""}]},form:{},formVisible:!1,balance:"200"}},created:function(){var e=this;Object(n.c)(1).then(function(t){e.list=t.data})},methods:{handleCurrentChange:function(e){this.page=e},openForm:function(e,t){this.form=t,this.formVisible=!0},addUse:function(){this.moneyForm.moneyUse.push({use:"",sum:"",key:Date.now()})},removeUse:function(e){var t=this.moneyForm.moneyUse.indexOf(e);-1!==t&&this.moneyForm.moneyUse.splice(t,1),0==this.moneyForm.moneyUse.length&&this.moneyForm.moneyUse.push({use:"",sum:"",key:Date.now()})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var o=t.form.money,n=0;if(t.moneyForm.moneyUse.forEach(function(e,t){""!=e.use&&(n+=e.sum)}),n!=o)return t.$message.error("总金额不相等"),!1;t.$message.success("提交成功")}})}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("活动经费详情")])]),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"tableClass",staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":!0,size:"mini"}},[o("el-table-column",{attrs:{type:"index",width:"35"}}),o("el-table-column",{attrs:{prop:"timeBegin",label:"举办时间",sortable:"","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"theme",label:"活动主题","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"money",label:"使用金额总额","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(o){e.openForm(t.$index,t.row)}}},[e._v("填写经费表\r\n\t\t\t\t")])]}}])})],1),e._v(" "),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("span",[e._v("余额："+e._s(e.balance)+"元")]),e._v(" "),o("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",small:"",layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{attrs:{title:"活动经费使用详情",visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t}}},[o("el-form",{attrs:{model:e.form,size:"mini","label-width":"80px",disabled:""}},[o("el-form-item",{attrs:{label:"活动主题"}},[o("el-input",{model:{value:e.form.theme,callback:function(t){e.$set(e.form,"theme",t)},expression:"form.theme"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"总金额"}},[o("el-input",{model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}})],1)],1),e._v(" "),o("el-form",{ref:"moneyForm",attrs:{model:e.moneyForm,size:"mini","label-width":"80px"}},[e._l(e.moneyForm.moneyUse,function(t,n){return o("el-form-item",{key:t.key,attrs:{label:"用途"+(n+1),prop:"moneyUse."+n+".use",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{placeholder:"请输入用途"},model:{value:t.use,callback:function(o){e.$set(t,"use",o)},expression:"item.use"}})],1),e._v(" "),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("：")]),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-input-number",{attrs:{min:1,step:50},model:{value:t.sum,callback:function(o){e.$set(t,"sum",o)},expression:"item.sum"}}),e._v(" 元")],1),e._v(" "),o("el-col",{attrs:{span:5,offset:1}},[o("el-button",{on:{click:function(o){o.preventDefault(),e.removeUse(t)}}},[e._v("删除")])],1)],1)}),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:e.addUse}},[e._v("新增经费用途")])],2),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:""},on:{click:function(t){e.formVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("moneyForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var a=o("VU/8")(s,l,!1,function(e){o("PQlc")},"data-v-3f655a98",null);t.default=a.exports}});
//# sourceMappingURL=16.e036add51b0f1eb69b1b.js.map